# Number Drop 개발 체크리스트

> 각 Phase별 상세 개발 태스크
> 생성일: 2026-01-03

---

# 🔴 Phase 1: 벤치마크 일치 (필수)

## 1.1 블록 색상 시스템

### 설계
- [ ] 숫자별 색상 팔레트 확정
- [ ] 색상 코드 config에 추가

### 구현
- [ ] `frontend/src/game/config.ts` - BLOCK_COLORS 상수 추가
  ```typescript
  BLOCK_COLORS: {
    2: 0x90EE90,    // 연두색
    4: 0x4ECDC4,    // 초록색
    8: 0x45B7D1,    // 청록색
    16: 0x5D6BE8,   // 파란색
    32: 0xE8875D,   // 주황색
    64: 0xE85D8C,   // 분홍색
    128: 0x7BA3A8,  // 청회색
    256: 0xE85DA8,  // 분홍색
    512: 0x5DE87B,  // 초록색
    1024: 0x888888, // 회색
    2048: 0xFF8C00, // 주황색 (특수)
    4096: 0x9B59B6, // 보라색 (특수)
    8192: 0xE74C3C, // 빨간색 (특수)
  }
  ```
- [ ] `frontend/src/game/objects/Block.ts` - getColorByValue() 메서드 수정
- [ ] 색상 적용 테스트

### 테스트
- [ ] 각 숫자별 색상 확인
- [ ] 병합 시 색상 변경 확인
- [ ] 스크린샷 비교

---

## 1.2 특수 블록 효과 (2048, 4096)

### 설계
- [ ] 왕관 아이콘 에셋 준비 (SVG 또는 이모지)
- [ ] 빛나는 효과 애니메이션 설계

### 구현
- [ ] `frontend/src/game/objects/Block.ts` - isSpecialBlock() 메서드 추가
  ```typescript
  private isSpecialBlock(): boolean {
    return this.value >= 2048;
  }
  ```
- [ ] 왕관 아이콘 렌더링 추가
  - [ ] 블록 상단에 작은 왕관 표시
  - [ ] 2048: 금색 왕관
  - [ ] 4096+: 다이아몬드 왕관
- [ ] Glow 효과 추가
  - [ ] Phaser Graphics로 외곽선 glow
  - [ ] 또는 그림자 효과로 대체
- [ ] 반짝임(Sparkle) 애니메이션
  - [ ] 파티클 이펙트 또는
  - [ ] 트윈 애니메이션으로 구현

### 테스트
- [ ] 2048 블록 생성 시 효과 확인
- [ ] 4096 블록 생성 시 효과 확인
- [ ] 성능 영향 확인

---

## 1.3 콤보 팝업 UI

### 설계
- [ ] 콤보 배지 디자인 (골드 프레임 + 리본)
- [ ] 애니메이션 타이밍 설계

### 구현
- [ ] `frontend/src/game/scenes/GameScene.ts` - showComboPopup() 메서드 추가
  ```typescript
  private showComboPopup(comboCount: number): void {
    // 콤보 배지 생성
    // 페이드 인 -> 유지 -> 페이드 아웃
  }
  ```
- [ ] 콤보 배지 컨테이너 생성
  - [ ] 배경 (골드/브론즈 프레임)
  - [ ] 숫자 텍스트 (X 콤보)
  - [ ] 리본 장식 (선택)
- [ ] 애니메이션 구현
  - [ ] 스케일 업 (0 → 1)
  - [ ] 0.5초 유지
  - [ ] 페이드 아웃
- [ ] 콤보 발생 시점에 호출 연결

### 테스트
- [ ] 2콤보 이상 발생 시 팝업 확인
- [ ] 연속 콤보 시 갱신 확인
- [ ] 애니메이션 부드러움 확인

---

## 1.4 블록 미리보기 레이아웃

### 설계
- [ ] 새 레이아웃 좌표 계산
  - 현재 블록: 그리드 상단 중앙
  - 다음 블록: 현재 블록 우측

### 구현
- [ ] `frontend/src/game/scenes/GameScene.ts` - createPreviewUI() 수정
- [ ] 현재 블록 위치 변경
  - [ ] X: 화면 중앙
  - [ ] Y: 그리드 상단 위
  - [ ] 크기: 60x60 (큰 크기)
- [ ] 다음 블록 위치 변경
  - [ ] X: 현재 블록 우측 + 10px
  - [ ] Y: 동일
  - [ ] 크기: 40x40 (작은 크기)
- [ ] "NEXT" 라벨 제거 또는 위치 조정
- [ ] "+1" 라벨 제거 또는 숨김

### 테스트
- [ ] 미리보기 위치 확인
- [ ] 그리드와 겹침 없음 확인
- [ ] 다양한 화면 크기에서 테스트

---

## 1.5 상단 UI 재배치

### 설계
- [ ] 새 레이아웃 와이어프레임
  ```
  [코인 430 +]  [👑 18,404]  [🌍 #102928]
                 18,404
  [↩️][👥]                    [⭐][≡]
  ```

### 구현

#### 1.5.1 코인 표시 이동
- [ ] 현재 하단 코인 표시 제거
- [ ] 좌상단에 코인 바 추가
  - [ ] 코인 아이콘 (💰 또는 이미지)
  - [ ] 코인 숫자
  - [ ] + 버튼 (광고 시청)
- [ ] 코인 변경 시 애니메이션

#### 1.5.2 최고점수 왕관 아이콘
- [ ] "BEST: X" 텍스트 제거
- [ ] 왕관 아이콘 + 숫자로 변경
- [ ] 위치: 상단 중앙

#### 1.5.3 글로벌 랭킹 표시
- [ ] 우상단에 랭킹 표시 추가
  - [ ] 지구 아이콘 (🌍)
  - [ ] #순위 숫자
- [ ] LeaderboardService에서 순위 가져오기
- [ ] 실시간 업데이트 (점수 변경 시)

#### 1.5.4 되돌리기 버튼
- [ ] 좌측에 되돌리기 버튼 추가 (↩️)
- [ ] 1회 무료 또는 코인 소모 로직
- [ ] Grid.ts에 undo() 메서드 구현
- [ ] 이전 상태 저장 로직

#### 1.5.5 기타 버튼
- [ ] 초대 버튼 (선택) - 👥
- [ ] 프리미엄 버튼 (선택) - ⭐
- [ ] 메뉴 버튼 위치 조정 - ≡

### 테스트
- [ ] 모든 버튼 클릭 동작 확인
- [ ] 코인 증감 표시 확인
- [ ] 랭킹 표시 확인
- [ ] 되돌리기 동작 확인

---

## 1.6 글로벌 랭킹 표시 (실시간)

### 설계
- [ ] 랭킹 API 설계 (현재 점수 기준 순위)
- [ ] 랭크업 팝업 디자인

### 구현

#### 1.6.1 랭킹 서비스 확장
- [ ] `frontend/src/services/LeaderboardService.ts` 수정
  ```typescript
  async getRankByScore(score: number): Promise<number> {
    // 현재 점수보다 높은 점수 수 + 1 = 순위
  }
  ```
- [ ] 캐싱 로직 (매 요청마다 API 호출 방지)

#### 1.6.2 게임 화면 랭킹 표시
- [ ] `GameScene.ts` - rankText 추가
- [ ] 점수 변경 시 랭킹 업데이트
- [ ] 랭킹 변경 애니메이션 (숫자 롤링)

#### 1.6.3 랭크업 팝업
- [ ] showRankUpPopup(oldRank, newRank) 메서드
- [ ] "Rank Up! #3,743,059" 팝업
- [ ] 차트 아이콘 + 애니메이션

### 테스트
- [ ] 점수 증가 시 랭킹 변화 확인
- [ ] 랭크업 팝업 동작 확인
- [ ] 네트워크 오류 시 처리 확인

---

# 🟡 Phase 2: 기본 차별화 (권장)

## 2.1 업적 시스템

### 설계
- [ ] 업적 목록 및 조건 확정
- [ ] 업적 데이터 구조 설계
  ```typescript
  interface Achievement {
    id: string;
    name: string;
    description: string;
    condition: AchievementCondition;
    reward: number;
    unlocked: boolean;
    unlockedAt?: Date;
  }
  ```

### 구현

#### 2.1.1 업적 서비스
- [ ] `frontend/src/services/AchievementService.ts` 생성
  - [ ] 업적 목록 정의
  - [ ] checkAchievement() 메서드
  - [ ] unlockAchievement() 메서드
  - [ ] getUnlockedAchievements() 메서드

#### 2.1.2 업적 스토어
- [ ] `frontend/src/store/achievementStore.ts` 생성
  - [ ] Zustand 스토어
  - [ ] LocalStorage 연동

#### 2.1.3 업적 체크 포인트
- [ ] 첫 병합: Grid.ts - merge 이벤트
- [ ] 블록 달성: Block 생성 시
- [ ] 점수 달성: 점수 변경 시
- [ ] 콤보 달성: 콤보 발생 시
- [ ] 게임 수: 게임 종료 시
- [ ] 연속 접속: 앱 시작 시

#### 2.1.4 업적 알림 팝업
- [ ] showAchievementPopup() 메서드
- [ ] 업적 아이콘 + 이름 + 보상
- [ ] 슬라이드 인/아웃 애니메이션

#### 2.1.5 업적 화면
- [ ] `AchievementScene.ts` 생성
- [ ] 업적 목록 표시
- [ ] 달성/미달성 구분
- [ ] 진행률 표시

### 테스트
- [ ] 각 업적 조건 충족 시 해금 확인
- [ ] 보상 지급 확인
- [ ] 중복 해금 방지 확인
- [ ] 데이터 저장/로드 확인

---

## 2.2 통계 화면

### 설계
- [ ] 통계 항목 확정
- [ ] 통계 화면 레이아웃

### 구현

#### 2.2.1 통계 서비스
- [ ] `frontend/src/services/StatisticsService.ts` 생성
  ```typescript
  interface GameStats {
    totalGames: number;
    totalScore: number;
    highScore: number;
    highestBlock: number;
    totalMerges: number;
    totalPlayTime: number;
    maxCombo: number;
    dailyScores: { date: string; score: number }[];
  }
  ```
- [ ] 통계 업데이트 메서드
- [ ] 통계 로드/저장

#### 2.2.2 통계 수집 포인트
- [ ] 게임 시작: totalGames++
- [ ] 게임 종료: totalScore, highScore, playTime
- [ ] 병합: totalMerges++
- [ ] 콤보: maxCombo 갱신
- [ ] 블록 생성: highestBlock 갱신

#### 2.2.3 통계 화면
- [ ] `StatsScene.ts` 생성
- [ ] 통계 카드 UI
- [ ] 일별 점수 그래프 (최근 7일)
- [ ] 메뉴에서 진입 버튼 추가

### 테스트
- [ ] 통계 정확성 확인
- [ ] 그래프 렌더링 확인
- [ ] 데이터 영속성 확인

---

## 2.3 추가 아이템 (분할, 픽업, 제거)

### 설계
- [ ] 아이템 동작 상세 설계
- [ ] UI/UX 플로우 설계

### 구현

#### 2.3.1 분할 아이템 (➗)
- [ ] 아이템 버튼 추가 (150 코인)
- [ ] 블록 선택 모드 진입
- [ ] 선택된 블록 숫자 절반으로
- [ ] 4 이하는 사용 불가
- [ ] Grid.ts - divideBlock(x, y) 메서드

#### 2.3.2 픽업 아이템 (🎯)
- [ ] 아이템 버튼 추가 (200 코인)
- [ ] 블록 선택 → 위치 선택 모드
- [ ] 선택된 블록을 새 위치로 이동
- [ ] Grid.ts - pickupBlock(fromX, fromY, toX, toY) 메서드

#### 2.3.3 제거 아이템 (🗑️)
- [ ] 아이템 버튼 추가 (120 코인)
- [ ] 블록 선택 모드 진입
- [ ] 선택된 블록 완전 삭제
- [ ] Grid.ts - removeBlock(x, y) 메서드

#### 2.3.4 아이템 UI
- [ ] 하단 아이템 바 확장 (스크롤 또는 2줄)
- [ ] 아이템 선택 시 하이라이트
- [ ] 취소 버튼

### 테스트
- [ ] 각 아이템 동작 확인
- [ ] 코인 차감 확인
- [ ] 취소 시 코인 복구 없음 확인
- [ ] 엣지 케이스 테스트

---

## 2.4 되돌리기 버튼

### 설계
- [ ] Undo 스택 설계 (최대 1회 또는 N회)
- [ ] 상태 저장 시점 결정

### 구현

#### 2.4.1 상태 저장
- [ ] Grid.ts - saveState() 메서드
  ```typescript
  private stateHistory: GridState[] = [];

  saveState(): void {
    this.stateHistory.push({
      blocks: this.blocks.map(row => row.map(b => b?.value)),
      score: this.score,
    });
  }
  ```
- [ ] 드롭 직전에 saveState() 호출

#### 2.4.2 되돌리기 실행
- [ ] Grid.ts - undo() 메서드
- [ ] 이전 상태 복원
- [ ] 블록 재생성
- [ ] 점수 복원

#### 2.4.3 되돌리기 버튼
- [ ] GameScene.ts - 되돌리기 버튼 UI
- [ ] 1회 무료 또는 50 코인 소모
- [ ] 사용 가능 횟수 표시
- [ ] 사용 불가 시 비활성화

### 테스트
- [ ] 되돌리기 동작 확인
- [ ] 여러 번 연속 되돌리기 (N회 지원 시)
- [ ] 게임 시작 직후 되돌리기 방지

---

# 🟢 Phase 3: 확장 기능 (선택)

## 3.1 타임 어택 모드

### 설계
- [ ] 게임 규칙 설계
  - 제한 시간: 60/120/180초
  - 시간 종료 시 게임 오버
  - 별도 랭킹

### 구현

#### 3.1.1 게임 모드 선택
- [ ] MenuScene에 모드 선택 추가
- [ ] 일반 모드 / 타임 어택 모드

#### 3.1.2 타이머 구현
- [ ] GameScene.ts - 타이머 UI
- [ ] 남은 시간 표시
- [ ] 시간 종료 시 게임 오버

#### 3.1.3 타임 어택 랭킹
- [ ] 별도 랭킹 보드
- [ ] 시간별 랭킹 분리 (60초/120초/180초)

### 테스트
- [ ] 타이머 정확성 확인
- [ ] 게임 오버 처리 확인
- [ ] 랭킹 저장 확인

---

## 3.2 스킨/테마 시스템

### 설계
- [ ] 스킨 데이터 구조
- [ ] 테마 데이터 구조
- [ ] 상점 UI 설계

### 구현

#### 3.2.1 스킨 시스템
- [ ] `frontend/src/services/SkinService.ts` 생성
- [ ] 스킨 정의 (색상 팔레트, 블록 모양)
- [ ] 현재 스킨 적용 로직

#### 3.2.2 테마 시스템
- [ ] `frontend/src/services/ThemeService.ts` 생성
- [ ] 테마 정의 (배경색, UI 색상)
- [ ] 현재 테마 적용 로직

#### 3.2.3 상점 화면
- [ ] `ShopScene.ts` 생성
- [ ] 스킨/테마 목록
- [ ] 구매 로직 (코인 차감)
- [ ] 장착 로직

### 테스트
- [ ] 스킨 변경 시 블록 색상 변경 확인
- [ ] 테마 변경 시 배경 변경 확인
- [ ] 구매 및 장착 동작 확인

---

## 3.3 친구 시스템

### 설계
- [ ] 친구 데이터 구조
- [ ] 친구 추가 방식 (코드/검색)
- [ ] 백엔드 API 설계

### 구현

#### 3.3.1 백엔드 API
- [ ] POST /api/friends/add
- [ ] GET /api/friends/list
- [ ] DELETE /api/friends/remove
- [ ] GET /api/friends/ranking

#### 3.3.2 친구 서비스
- [ ] `frontend/src/services/FriendService.ts` 생성
- [ ] 친구 추가/삭제
- [ ] 친구 목록 조회
- [ ] 친구 랭킹 조회

#### 3.3.3 친구 화면
- [ ] `FriendsScene.ts` 생성
- [ ] 친구 목록
- [ ] 친구 추가 (초대 코드)
- [ ] 친구 랭킹

### 테스트
- [ ] 친구 추가/삭제 확인
- [ ] 친구 랭킹 확인
- [ ] 오프라인 시 처리 확인

---

## 3.4 하단 아이템 바 개선

### 설계
- [ ] 새 아이템 바 레이아웃
- [ ] 광고 쿨타임 타이머 UI

### 구현

#### 3.4.1 영상광고 보상 표시
- [ ] "+111 코인" 보상 표시
- [ ] 쿨타임 타이머 (초 단위)
- [ ] 사용 가능 시 하이라이트

#### 3.4.2 아이템 바 확장
- [ ] 스크롤 가능한 아이템 바
- [ ] 또는 2줄 레이아웃
- [ ] 아이템 추가에 유연한 구조

### 테스트
- [ ] 광고 쿨타임 표시 확인
- [ ] 아이템 바 스크롤/확장 확인

---

# 🔵 Phase 4: 혁신 기능 (장기)

## 4.1 대전 모드

### 설계
- [ ] 매칭 시스템 설계
- [ ] 실시간 동기화 프로토콜
- [ ] 승패 판정 로직

### 구현
- [ ] WebSocket 서버 구축
- [ ] 매칭 서비스
- [ ] 실시간 게임 동기화
- [ ] 대전 UI

---

## 4.2 물리 엔진 강화

### 설계
- [ ] Matter.js 또는 Phaser Physics 선택
- [ ] 블록 물리 속성 정의

### 구현
- [ ] 물리 엔진 통합
- [ ] 블록 충돌 처리
- [ ] 굴러가는/밀리는 효과

---

## 4.3 시즌 패스

### 설계
- [ ] 시즌 기간 및 보상 설계
- [ ] 무료/프리미엄 트랙 보상

### 구현
- [ ] 시즌 패스 서비스
- [ ] 경험치/레벨 시스템
- [ ] 보상 지급 로직
- [ ] 시즌 패스 UI

---

## 4.4 3D 모드

### 설계
- [ ] 3D 라이브러리 선택 (Three.js)
- [ ] 3D 블록/큐브 설계

### 구현
- [ ] 3D 렌더링 시스템
- [ ] 카메라 컨트롤
- [ ] 3D 병합 로직

---

# 체크리스트 사용법

## 상태 표시
- [ ] 미완료
- [x] 완료
- [~] 진행중
- [-] 스킵/취소

## 진행 추적
각 태스크 완료 시:
1. 체크박스 체크 `[x]`
2. 커밋 메시지에 태스크 ID 포함
3. 주기적으로 진행률 리뷰

## 예상 소요 시간
| Phase | 태스크 수 | 예상 시간 |
|-------|----------|----------|
| Phase 1 | ~50개 | 40-60시간 |
| Phase 2 | ~40개 | 30-50시간 |
| Phase 3 | ~30개 | 40-60시간 |
| Phase 4 | ~20개 | 60-100시간 |

---

*최종 업데이트: 2026-01-03*
